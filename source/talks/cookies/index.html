<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <title>Cookies are bad for you</title>

  <link rel="stylesheet" href="./css/reset.css" type="text/css"/>
  <link rel="stylesheet" href="./css/showoff.css" type="text/css"/>

  <script type="text/javascript" src="./js/jquery-1.4.2.min.js"></script>
  <script type="text/javascript" src="./js/jquery.cycle.all.js"></script>
	<script type="text/javascript" src="./js/jquery-print.js"></script>
  <script type="text/javascript" src="./js/jquery.batchImageLoad.js"></script>

  <script type="text/javascript" src="./js/jquery.doubletap-0.1.js"></script>

  <script type="text/javascript" src="./js/fg.menu.js"></script>
  <script type="text/javascript" src="./js/showoff.js"></script>
  <script type="text/javascript" src="./js/jTypeWriter.js"> </script>
  <script type="text/javascript" src="./js/sh_main.min.js"></script>
  <script type="text/javascript" src="./js/core.js"></script>
  <script type="text/javascript" src="./js/showoffcore.js"></script>

  <link type="text/css" href="./css/fg.menu.css" media="screen" rel="stylesheet" />
  <link type="text/css" href="./css/theme/ui.all.css" media="screen" rel="stylesheet" />
  <link type="text/css" href="./css/sh_style.css" rel="stylesheet" >

  

  

  <script type="text/javascript">
  $(function(){
    setupPreso(false, './');
  });
  </script>
</head>

<body>


<a tabindex="0" href="#search-engines" class="fg-button fg-button-icon-right ui-widget ui-state-default ui-corner-all" id="navmenu"><span class="ui-icon ui-icon-triangle-1-s"></span>slides</a>
<div id="navigation" class="hidden"></div>

<div id="help">
  <table>
    <tr><td class="key">space, &rarr;</td><td>next slide</td></tr>
    <tr><td class="key">&larr;</td><td>previous slide</td></tr>
    <tr><td class="key">d</td><td>debug mode</td></tr>
    <tr><td class="key">## &lt;ret&gt;</td><td>go to slide #</td></tr>
    <tr><td class="key">c</td><td>table of contents (vi)</td></tr>
    <tr><td class="key">f</td><td>toggle footer</td></tr>
    <tr><td class="key">r</td><td>reload slides</td></tr>
    <tr><td class="key">z</td><td>toggle help (this)</td></tr>
  </table>
</div>

<div class="buttonNav">
  <input type="submit" onClick="prevStep();" value="prev"/>
  <input type="submit" onClick="nextStep();" value="next"/>
</div>

<div id="preso">loading presentation...</div>
<div id="footer">
  <span id="slideInfo"></span>
  <span id="debugInfo"></span>
  <span id="notesInfo"></span>
</div>

<div id="slides" class="offscreen" style="display:none;">
<div class="slide" data-transition="none"><div class="content" ref="intro/01_title">
<h1>Cookies are Bad for You</h1>

<h2>Improving Security on the Web</h2>

<p><br/>
<br/>
<br/>
<br/>
<br/>
</p>

<h3>Jesse Hallett</h3>

<h3><a href="https://twitter.com/#!/hallettj">@hallettj</a></h3>

<h3>Open Source Bridge - June 23, 2011</h3></div>
</div><div class="slide" data-transition="none"><div class="content full-page" ref="main_event/01_cookies/1">
<p><img src="svg/cookies.svg" width="1024" height="768" alt="cookie authentication"/></p></div>
</div><div class="slide" data-transition="none"><div class="content full-page" ref="main_event/01_cookies/2">
<p><img src="svg/cookie-strengths.svg" width="1024" height="768" alt="weaknesses of cookie authentication"/></p></div>
</div><div class="slide" data-transition="none"><div class="content full-page" ref="main_event/01_cookies/3">
<p><img src="svg/session_hijacking.svg" width="1024" height="768" alt="session hijacking"/></p></div>
</div><div class="slide" data-transition="none"><div class="content full-page" ref="main_event/01_cookies/4">
<p><img src="svg/csrf.svg" width="1024" height="768" alt="a CSRF attack"/></p></div>
</div><div class="slide" data-transition="none"><div class="content full-page" ref="main_event/01_cookies/5">
<p><img src="svg/xss.svg" width="1024" height="768" alt="cookie theft via XSS"/></p></div>
</div><div class="slide" data-transition="none"><div class="content full-page" ref="main_event/01_cookies/6">
<p><img src="svg/secure-cookie-plus-https-strengths.svg" width="1024" height="768" alt="advantages of HTTPS with cookie authentication"/></p></div>
</div><div class="slide" data-transition="none"><div class="content full-page" ref="main_event/01_cookies/7">
<p><img src="svg/rock_paper_scissors.svg" width="1024" height="768" alt="rock, paper, scissors"/></p></div>
</div><div class="slide" data-transition="none"><div class="content full-page" ref="main_event/02_oauth/1">
<p><img src="svg/Oauth_logo.svg" width="598" height="600" alt="OAuth"/></p></div>
</div><div class="slide" data-transition="none"><div class="content full-page" ref="main_event/02_oauth/2">
<p><img src="svg/oauth_auth_code_step_1.svg" width="1024" height="768" alt="3-legged oauth step 1"/></p></div>
</div><div class="slide" data-transition="none"><div class="content full-page" ref="main_event/02_oauth/3">
<p><img src="svg/oauth_auth_code_step_2.svg" width="1024" height="768" alt="3-legged oauth step 2"/></p></div>
</div><div class="slide" data-transition="none"><div class="content full-page" ref="main_event/02_oauth/4">
<p><img src="svg/oauth_auth_code_step_3.svg" width="1024" height="768" alt="3-legged oauth step 3"/></p></div>
</div><div class="slide" data-transition="none"><div class="content full-page" ref="main_event/02_oauth/5">
<p><img src="svg/oauth_auth_code_step_4.svg" width="1024" height="768" alt="3-legged oauth step 4"/></p></div>
</div><div class="slide" data-transition="none"><div class="content full-page" ref="main_event/02_oauth/6">
<p><img src="svg/oauth_auth_code_step_5.svg" width="1024" height="768" alt="3-legged oauth step 5"/></p></div>
</div><div class="slide" data-transition="none"><div class="content" ref="main_event/02_oauth/7">
<h1>2-legged OAuth</h1></div>
</div><div class="slide" data-transition="none"><div class="content full-page" ref="main_event/02_oauth/8">
<p><img src="svg/oauth_auth_pass_step_1.svg" width="1024" height="768" alt="2-legged oauth step 1"/></p></div>
</div><div class="slide" data-transition="none"><div class="content full-page" ref="main_event/02_oauth/9">
<p><img src="svg/oauth_auth_pass_step_2.svg" width="1024" height="768" alt="2-legged oauth step 2"/></p></div>
</div><div class="slide" data-transition="none"><div class="content full-page" ref="main_event/02_oauth/10">
<p><img src="svg/oauth_auth_pass_step_3.svg" width="1024" height="768" alt="2-legged oauth step 3"/></p></div>
</div><div class="slide" data-transition="none"><div class="content code small" ref="main_event/02_oauth/11">
<pre class="sh_HTTP"><code>GET /resource HTTP/1.1
Host: server.example.com
Authorization: Bearer vF9dft4qmT</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content code small" ref="main_event/02_oauth/12">
<pre class="sh_HTTP"><code>GET /resource HTTP/1.1
Host: server.example.com
Cookie: name=value; name2=value2</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content code small" ref="main_event/02_oauth/13">
<pre class="sh_HTTP"><code>POST /request HTTP/1.1
Host: example.com
Content-Type: application/x-www-form-urlencoded
Authorization: MAC id="jd93dh9dh39D",
                   nonce="273156:di3hvdf8",
                   bodyhash="k9kbtCIy0CkI3/FEfpS/oIDjk6k=",
                   mac="W7bdMZbv9UWOTadASIQHagZyirA="

hello=world%21</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content full-page" ref="main_event/02_oauth/14">
<p><img src="svg/oauth-hmac-strengths.svg" width="1024" height="768" alt="strengths of OAuth with MAC signing"/></p></div>
</div><div class="slide" data-transition="none"><div class="content full-page" ref="main_event/02_oauth/15">
<p><img src="svg/oauth-plus-https-strengths.svg" width="1024" height="768" alt="strengths of OAuth with HTTPS"/></p></div>
</div><div class="slide" data-transition="none"><div class="content full-page" ref="main_event/02_oauth/16">
<p><img src="svg/strengths-summary.svg" width="1024" height="768" alt="summary of authentication method strengths"/></p></div>
</div><div class="slide" data-transition="none"><div class="content small" ref="main_event/03_hmac_performance/1">
<h1>HMAC</h1>

<pre class="sh_javascript"><code>msg = nonce + method + URL + HASH(body)

opad = 0x5c5c5c...5c5c
ipad = 0x363636...3636

HMAC(key, msg) = HASH((key^opad) + HASH(key^ipad) + msg)</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content" ref="main_event/03_hmac_performance/2">
<h1>HMAC SHA-1 performance</h1>

<table style="margin-left: auto; margin-right: auto; font-size: xx-large">
    <thead>
        <tr>
            <th/>
            <th style="padding-left: 2em; padding-bottom: 0.5em">short message</th>
            <th style="padding-left: 2em">~30k message</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="padding-bottom: 0.5em">Android</td>
            <td align="right">3 ms</td>
            <td align="right">286 ms</td>
        </tr>
        <tr>
            <td style="padding-bottom: 0.5em">iPhone</td>
            <td align="right">1 ms</td>
            <td align="right">100 ms</td>
        </tr>
        <tr>
            <td style="padding-bottom: 0.5em">iPad</td>
            <td align="right">1 ms</td>
            <td align="right">91 ms</td>
        </tr>
        <tr>
            <td style="padding-bottom: 0.5em">Firefox</td>
            <td align="right">0.1 ms</td>
            <td align="right">8 ms</td>
        </tr>
        <tr>
            <td style="padding-bottom: 0.5em">Chrome</td>
            <td align="right">0.09 ms</td>
            <td align="right">7 ms</td>
        </tr>
        <tr>
            <td style="padding-bottom: 0.5em">IE 8.0</td>
            <td align="right">3 ms</td>
            <td align="right">&gt;1000 ms</td>
        </tr>
        <tr>
            <td style="padding-bottom: 0.5em">IE 9.0</td>
            <td align="right">0.2 ms</td>
            <td align="right">20 ms</td>
        </tr>
    </tbody>
    <tfoot>
        <tr>
            <td colspan="3" style="font-size: large; padding-top: 3em">
                <a href="http://jsperf.com/hmac-of-short-message-using-sha-1-and-sha-256/2">
                    http://jsperf.com/hmac-of-short-message-using-sha-1-and-sha-256/2
                </a>
            </td>
        </tr>
    </tfoot>
</table>
</div>
</div><div class="slide" data-transition="none"><div class="content" ref="main_event/03_hmac_performance/3">
<h1>HMAC SHA-256 performance</h1>

<table style="margin-left: auto; margin-right: auto; font-size: xx-large">
    <thead>
        <tr>
            <th/>
            <th style="padding-left: 2em; padding-bottom: 0.5em">short message</th>
            <th style="padding-left: 2em">~30k message</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="padding-bottom: 0.5em">Android</td>
            <td align="right">8 ms</td>
            <td align="right">500 ms</td>
        </tr>
        <tr>
            <td style="padding-bottom: 0.5em">iPhone</td>
            <td align="right">4 ms</td>
            <td align="right">250 ms</td>
        </tr>
        <tr>
            <td style="padding-bottom: 0.5em">iPad</td>
            <td align="right">3 ms</td>
            <td align="right">273 ms</td>
        </tr>
        <tr>
            <td style="padding-bottom: 0.5em">Firefox</td>
            <td align="right">0.3 ms</td>
            <td align="right">15 ms</td>
        </tr>
        <tr>
            <td style="padding-bottom: 0.5em">Chrome</td>
            <td align="right">0.3 ms</td>
            <td align="right">22 ms</td>
        </tr>
        <tr>
            <td style="padding-bottom: 0.5em">IE 8.0</td>
            <td align="right">8 ms</td>
            <td align="right">&gt;1000 ms</td>
        </tr>
        <tr>
            <td style="padding-bottom: 0.5em">IE 9.0</td>
            <td align="right">0.6 ms</td>
            <td align="right">63 ms</td>
        </tr>
    </tbody>
    <tfoot>
        <tr>
            <td colspan="3" style="font-size: large; padding-top: 3em">
                <a href="http://jsperf.com/hmac-of-short-message-using-sha-1-and-sha-256/2">
                    http://jsperf.com/hmac-of-short-message-using-sha-1-and-sha-256/2
                </a>
            </td>
        </tr>
    </tfoot>
</table>
</div>
</div><div class="slide" data-transition="none"><div class="content smbullets" ref="main_event/04_storing_access_token">
<h1>storing an access token</h1>

<ul>
<li>in memory</li>
<li>sessionStorage</li>
<li>localStorage</li>
<li>indexedDB</li>
<li>secure cookie</li>
<li>user data (IE)</li>
<li>flash storage</li>
</ul>
</div>
</div><div class="slide" data-transition="none"><div class="content full-page" ref="main_event/05_application_architecture/1">
<p><img src="svg/bigpipe_step_1.svg" width="1024" height="768" alt="loading page elements asynchronously"/></p></div>
</div><div class="slide" data-transition="none"><div class="content full-page" ref="main_event/05_application_architecture/2">
<p><img src="svg/bigpipe_step_2.svg" width="1024" height="768" alt="done loading page elements asynchronously"/></p></div>
</div><div class="slide" data-transition="none"><div class="content smaller" ref="main_event/06_code">
<h1><a href="https://github.com/hallettj/rhinautheros">github.com/hallettj/rhinautheros</a></h1></div>
</div><div class="slide" data-transition="none"><div class="content smbullets" ref="finish/01_image_credits">
<h1>Image Credits</h1>

<ul>
<li><a href="http://en.wikipedia.org/wiki/File:Oauth_logo.svg">OAuth logo</a> by Chris Messina, Creative Commons Attribution-Share Alike 3.0 Unported</li>
<li>other images from the <a href="http://en.wikipedia.org/wiki/Open_Clip_Art_Library">Open Clip Art Library</a>, public domain</li>
</ul>
</div>
</div><div class="slide" data-transition="none"><div class="content smbullets" ref="finish/02_references">
<h1>References</h1>

<ul>
<li><p>The OAuth 2.0 Authorization Protocol draft-ietf-oauth-v2-16
<a href="http://tools.ietf.org/html/draft-ietf-oauth-v2-16">http://tools.ietf.org/html/draft-ietf-oauth-v2-16</a></p></li>
<li><p>The OAuth 2.0 Protocol: Bearer Tokens draft-ietf-oauth-v2-bearer-04
<a href="http://tools.ietf.org/html/draft-ietf-oauth-v2-bearer-04">http://tools.ietf.org/html/draft-ietf-oauth-v2-bearer-04</a></p></li>
<li><p>HTTP Authentication: MAC Access Authentication draft-ietf-oauth-v2-http-mac-00
<a href="http://tools.ietf.org/html/draft-ietf-oauth-v2-http-mac-00">http://tools.ietf.org/html/draft-ietf-oauth-v2-http-mac-00</a></p></li>
</ul>
</div>
</div><div class="slide" data-transition="none"><div class="content" ref="finish/03_thanks">
<h1>Thanks!</h1></div>
</div>
</div>

</body>
</html>
